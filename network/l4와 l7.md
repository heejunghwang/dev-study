
# Layer 4 Load balancing

*  클라이언트의 요청을 여러개의 서버에 어떻게 분배할지 결정

* 네트워크 전송 레이어(레이어 4) 정보 사용

  ```
  참고) 
  전송 제어 프로토콜 (TCP)은 전송 계층 (계층 4) 에서 작동합니다 . TCP는 브라우저가 실행중인 호스트와 서버 응용 프로그램이 실행중인 호스트 사이의 가상 연결을 효과적으로 만듭니다. 네트워크의 신뢰성이 떨어지기 때문에 IP 패킷이 손실되거나 손상되거나 고장날 수 있습니다. TCP에는 이러한 오류를 수정하는 메커니즘이있어 IP 패킷 스트림을 안정적인 통신 채널로 변환합니다. 각 응용 프로그램에는 고유 한 TCP 포트 번호가 지정되어 많은 응용 프로그램이 실행중인 호스트의 올바른 응용 프로그램으로 전달할 수 있습니다.
  ```

* 인터넷 트래픽의 경우에, Layer4 로드 밸런스는 패킷의 내용을 고려하지 않고, 패킷 헤더에 기록된 소스 및 대상 __IP 주소 및 포트에 대한 로드 밸런싱__ 을 결정

* 레이어 4로드 밸런서는 TCP 스트림의 처음 몇 패킷에서 추출한 주소 정보를 기반으로 라우팅 결정을 내리고 패킷 내용을 검사하지 않습니다. Layer 4로드 밸런서는 종종 공급 업체가 제공하는 전용 하드웨어 장치이며 독점로드 균형 조정 소프트웨어를 실행하며 NAT 작업은 소프트웨어가 아닌 특수 칩에 의해 수행 될 수 있습니다.



# Layer 7 Load balancing

* 레이어 7로드 밸런서는 OSI 모델의 최상위 레벨 인 *응용 프로그램* 계층에서 작동합니다 (인터넷에서는 HTTP 계층의 주요 프로토콜 임). __레이어 7로드 밸런서는 HTTP 헤더의 다양한 특성과 URL의 유형, 데이터 유형 (텍스트, 비디오, 그래픽) 또는 쿠키의 정보와 같은 실제 메시지 내용에 대한 라우팅 결정을 기반__ 으로합니다.
* NGINX 소프트웨어와 같은 현대적인 범용로드 밸런서는 일반적으로 레이어 7에서 작동하며 완전한 [역방향 프록시](https://www.nginx.com/resources/glossary/reverse-proxy-server) 역할을 합니다. NAT를 사용하는 레이어 4로드 밸런서와 같이 패킷 단위로 트래픽을 관리하는 대신 레이어 7로드 밸런싱 프록시는 요청과 응답을 전체적으로 읽을 수 있습니다. 클라이언트와 응용 프로그램 서버 간의 트랜잭션을 완전히 이해하여 트래픽을 관리하고 조작합니다
